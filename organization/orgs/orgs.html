<template name="orgs">
  <div class='orgs-filters'>
    {{#autoForm schema="OrgsFiltersSchema" id=ids.form resetOnSuccess=false }}
      {{#each filters}}
        <div class='list padding {{classes.visibility}}'>
          {{> Template.dynamic template=template}}
        </div>
      {{/each}}
      {{#unless showFiltersInactive.visible}}
        <div class='padding'>
          <span class='orgs-filters-show-inactive btn-link'>{{showFiltersInactive.html}}</span>
        </div>
      {{/unless}}
      <div class='margin-t padding-lr'>
        <button type="submit" class='btn btn-primary'>Search</button>
        <div class='orgs-filters-clear-all btn margin-l'>Clear</div>
      </div>
    {{/autoForm}}
  </div>

  <div class='orgs-results margin-b'>
    {{#each orgs.orgs}}
      <div class='orgs-org padding'>
        <a href='/org-edit?organizationId={{_id}}' class='a-div'>
          <div class='h3'>{{name}}</div>
          <div>{{xDisplay.links}}</div>
          <div>{{xDisplay.locationFormatted}}</div>
          <div>{{purpose}}</div>
        </a>
      </div>
    {{/each}}
  </div>

  {{#if orgs.hasOrgs}}
  {{else}}
    <div class='margin-t center'>
      <div>No results.. Try broadening your search criteria or <a class='' href='/org-edit'>add a new organization</a>.</div>
    </div>
  {{/if}}
  
</template>

<template name="orgsFilterName">
  {{> afQuickField name="name" label="Name / Link" class="orgs-filter-name-input"}}
</template>

<template name="orgsFilterLocation">
  <div class='orgs-filter-location-group'>
    <div class='orgs-filter-location-radius'>
      {{> afQuickField name="locationRadius" label="Within" placeholder="Radius (in km)" class="orgs-filter-location-radius-input"}}
    </div>
    <div class='orgs-filter-location-location'>
      {{> afQuickField type="googleplace" name="location" label="kilometers of location: " placeholder="Enter address / location" class="orgs-filter-location-input"}}
    </div>
  </div>
  <div class='orgs-filter-location-remote'>
    {{> afQuickField type="select" defaultValue=optsLocationRemote.defaultVal name="locationRemote" label="Show remote locations?" options=optsLocationRemote.opts class="orgs-filter-location-remote-input"}}
  </div>
</template>